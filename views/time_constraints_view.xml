<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>

    <!--Batch Constraints tree view-->
    <record id="batch_constraints_tree_view" model="ir.ui.view">
      <field name="name">op.batch.constraints.tree</field>
      <field name="model">op.batch.constraints</field>
      <field name="arch" type="xml">
        <tree string="Batch Constraints Tree" widget="one2many_list">
          <field name="student_id"/>
          <field name="weight"/>
        </tree>
      </field>
    </record>

    <!--Batch Constraints Form View-->
    <record id="batch_constraints_form_view" model="ir.ui.view">
      <field name="name">op.batch.constraints.form.view</field>
      <field name="model">op.batch.constraints</field>
      <field name="arch" type="xml">
        <form string="Batch Constraints Form">
          <sheet>
              <group col="4">
                <field name="student_id"/>
                <field name="division"/>
                <field name="weight"/>
                <field name="subdivision"/>
              </group>
              <group>
              <button string="Set All Available" type="object" name="set_available"  class="oe_highlight" />
              <button string="Set All Not Available" type="object" name="set_not_available" class="oe_highlight"/>
              </group>
            <notebook>
              <page string="Periods">
                <field name="batch_constraints_line_ids">
                  <tree string="Batch Constraints" editable="bottom" create="false" delete="false">
                    <field name="name" />
                    <field name="is_monday" invisible="1"/>
                    <field name="is_tuesday" invisible="1"/>
                    <field name="is_wednesday" invisible="1"/>
                    <field name="is_thursday" invisible="1"/>
                    <field name="is_friday" invisible="1"/>
                    <field name="is_saturday" invisible="1"/>
                    <field name="is_sunday" invisible="1"/>
                    <field name="monday" attrs="{'readonly': [('is_monday', '!=', True)]}" />
                    <field name="tuesday" attrs="{'readonly': [('is_tuesday', '!=', True)]}" />
                    <field name="wednesday" attrs="{'readonly': [('is_wednesday', '!=', True)]}" />
                    <field name="thursday" attrs="{'readonly': [('is_thursday', '!=', True)]}" />
                    <field name="friday" attrs="{'readonly': [('is_friday', '!=', True)]}" />
                    <field name="saturday" attrs="{'readonly': [('is_saturday', '!=', True)]}" />
                    <field name="sunday" attrs="{'readonly': [('is_sunday', '!=', True)]}" />
                  </tree>
                </field>
                <footer>
                  <span> 0 -> Allowed,</span>
                  <span> 1 -> Not Allowed.</span>
                </footer>
              <br/>
              <span>(*) This constraint does not induce gaps (or early gaps) for students. If a student set has lessons before and after a not available period, gaps will not be counted.</span>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!--Batch Constraints Action-->
    <record model="ir.actions.act_window" id="action_batch_constraints">
        <field name="name">Student set not available</field>
        <field name="res_model">op.batch.constraints</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="batch_constraints_tree_view" />
    </record>

    <!--Constraints Menu-->
    <menuitem id="menu_constraints" name="Constraints"  parent="openeducat_timetable.menu_op_timetable_root"
    sequence="41" />

    <!--Time Constraints Menu-->
    <menuitem id="menu_time_constraints" name="Time Constraints"  parent="menu_constraints"
    sequence="1" />

    <!--Student Constraints Menu-->
    <menuitem id="menu_student_constraints" name="Students"  parent="menu_time_constraints"
    sequence="1" />

    <!--Batch Constraints Menu-->
    <menuitem id="menu_batch_constraints" name="Student set not available"  parent="menu_student_constraints"
    action="action_batch_constraints" sequence="1" />


    <!--Activity Starting Time tree view-->
    <record id="activity_starting_time_tree_view" model="ir.ui.view">
      <field name="name">op.activity.starting.time.tree</field>
      <field name="model">op.activity.starting.time</field>
      <field name="arch" type="xml">
        <tree string="Activity Time Starting Time Tree">
          <field name="activity_id"/>
          <field name="weight"/>
        </tree>
      </field>
    </record>

    <!--Activity Starting Time Form View-->
    <record id="activity_starting_time_form_view" model="ir.ui.view">
      <field name="name">op.activity.starting.time.form.view</field>
      <field name="model">op.activity.starting.time</field>
      <field name="arch" type="xml">
        <form string="Activity starting Time Form">
          <sheet>
            <group>
              <group>
                <field name="activity_id"/>
              </group>
              <group>
                <field name="weight"/>
              </group>
              <group>
              <button string="Set All Available" type="object" name="set_available"  class="oe_highlight" />
              <button string="Set All Not Available" type="object" name="set_not_available" class="oe_highlight"/>
              </group>
            </group>
            <notebook>
              <page string="Starting Time">
                <field name="activity_starting_line_ids">
                  <tree string="Activity Starting Time" editable="bottom" create="false" delete="false">
                    <field name="name" />
                    <field name="is_monday" invisible="1"/>
                    <field name="is_tuesday" invisible="1"/>
                    <field name="is_wednesday" invisible="1"/>
                    <field name="is_thursday" invisible="1"/>
                    <field name="is_friday" invisible="1"/>
                    <field name="is_saturday" invisible="1"/>
                    <field name="is_sunday" invisible="1"/>
                    <field name="monday" attrs="{'readonly': [('is_monday', '!=', True)]}" />
                    <field name="tuesday" attrs="{'readonly': [('is_tuesday', '!=', True)]}" />
                    <field name="wednesday" attrs="{'readonly': [('is_wednesday', '!=', True)]}" />
                    <field name="thursday" attrs="{'readonly': [('is_thursday', '!=', True)]}" />
                    <field name="friday" attrs="{'readonly': [('is_friday', '!=', True)]}" />
                    <field name="saturday" attrs="{'readonly': [('is_saturday', '!=', True)]}" />
                    <field name="sunday" attrs="{'readonly': [('is_sunday', '!=', True)]}" />
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!--Activity Starting Time Constraints Action-->
    <record model="ir.actions.act_window" id="action_activity_starting_time">
        <field name="name">Activity Starting Time</field>
        <field name="res_model">op.activity.starting.time</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="activity_starting_time_tree_view" />
    </record>

    <!--Activity Constraints Menu-->
    <menuitem id="menu_activity_constraints" name="Activities"  parent="menu_time_constraints"
    sequence="2" />

    <!--Activity Starting Time Menu-->
    <menuitem id="menu_activity_starting_time_constraints" name="An activity has a set of preferred starting Time"  parent="menu_activity_constraints"
    action="action_activity_starting_time" sequence="1" />



    <!--Activity Time Slots tree view-->
    <record id="activity_time_slots_tree_view" model="ir.ui.view">
      <field name="name">op.activity.timeslots.tree</field>
      <field name="model">op.activity.timeslots</field>
      <field name="arch" type="xml">
        <tree string="Activity Time Slots Tree">
          <field name="activity_id"/>
          <field name="weight"/>
        </tree>
      </field>
    </record>

    <!--Activity Time Slots Form View-->
    <record id="activity_time_slots_form_view" model="ir.ui.view">
      <field name="name">op.activity.timeslots.form.view</field>
      <field name="model">op.activity.timeslots</field>
      <field name="arch" type="xml">
        <form string="Activity Time Slots Form">
          <sheet>
            <group>
              <group>
                <field name="activity_id"/>
              </group>
              <group>
                <field name="weight"/>
              </group>
              <group>
              <button string="Set All Available" type="object" name="set_available"  class="oe_highlight" />
              <button string="Set All Not Available" type="object" name="set_not_available" class="oe_highlight"/>
              </group>
            </group>
            <notebook>
              <page string="Time Slots">
                <field name="activity_timeslots_line_ids">
                  <tree string="Activity Time Slots" editable="bottom" create="false" delete="false">
                    <field name="name" />
                    <field name="is_monday" invisible="1"/>
                    <field name="is_tuesday" invisible="1"/>
                    <field name="is_wednesday" invisible="1"/>
                    <field name="is_thursday" invisible="1"/>
                    <field name="is_friday" invisible="1"/>
                    <field name="is_saturday" invisible="1"/>
                    <field name="is_sunday" invisible="1"/>
                    <field name="monday" attrs="{'readonly': [('is_monday', '!=', True)]}" />
                    <field name="tuesday" attrs="{'readonly': [('is_tuesday', '!=', True)]}" />
                    <field name="wednesday" attrs="{'readonly': [('is_wednesday', '!=', True)]}" />
                    <field name="thursday" attrs="{'readonly': [('is_thursday', '!=', True)]}" />
                    <field name="friday" attrs="{'readonly': [('is_friday', '!=', True)]}" />
                    <field name="saturday" attrs="{'readonly': [('is_saturday', '!=', True)]}" />
                    <field name="sunday" attrs="{'readonly': [('is_sunday', '!=', True)]}" />
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!--Activity Time Slots Action-->
    <record model="ir.actions.act_window" id="action_activity_time_slots">
        <field name="name">Activity Time Slots</field>
        <field name="res_model">op.activity.timeslots</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="activity_time_slots_tree_view" />
    </record>


    <!--Activity Time Slots Menu-->
    <menuitem id="menu_activity_time_slots" name="An activity has a set of preferred Time Slots"  parent="menu_activity_constraints"
    action="action_activity_time_slots" sequence="2" />


    <!--Activities Starting Time tree view-->
    <record id="activities_starting_time_tree_view" model="ir.ui.view">
      <field name="name">op.activities.starting.time.tree</field>
      <field name="model">op.activities.starting.time</field>
      <field name="arch" type="xml">
        <tree string="Activities Time Starting Time Tree">
          <field name="faculty_id"/>
          <field name="student_id"/>
          <field name="subject_id"/>
          <field name="activity_tag_id"/>
          <field name="duration"/>
          <field name="weight"/>
        </tree>
      </field>
    </record>

    <!--Activities Starting Time Form View-->
    <record id="activities_starting_time_form_view" model="ir.ui.view">
      <field name="name">op.activities.starting.time.form </field>
      <field name="model">op.activities.starting.time</field>
      <field name="arch" type="xml">
        <form string="Activities starting Time Form">
          <sheet>
            <group>
              <group>
                <field name="faculty_id"/>
                <field name="student_id"/>
                <field name="duration"/>
              </group>
              <group>
                <field name="subject_id"/>
                <field name="activity_tag_id"/>
                <field name="weight"/>
              </group>
              <group>
              <button string="Set All Available" type="object" name="set_available"  class="oe_highlight" />
              <button string="Set All Not Available" type="object" name="set_not_available" class="oe_highlight"/>
              </group>
            </group>
            <notebook>
              <page string="Starting Time">
                <field name="activities_starting_time_line_ids">
                  <tree string="Activities Starting Time" editable="bottom" create="false" delete="false">
                    <field name="name" />
                    <field name="is_monday" invisible="1"/>
                    <field name="is_tuesday" invisible="1"/>
                    <field name="is_wednesday" invisible="1"/>
                    <field name="is_thursday" invisible="1"/>
                    <field name="is_friday" invisible="1"/>
                    <field name="is_saturday" invisible="1"/>
                    <field name="is_sunday" invisible="1"/>
                    <field name="monday" attrs="{'readonly': [('is_monday', '!=', True)]}" />
                    <field name="tuesday" attrs="{'readonly': [('is_tuesday', '!=', True)]}" />
                    <field name="wednesday" attrs="{'readonly': [('is_wednesday', '!=', True)]}" />
                    <field name="thursday" attrs="{'readonly': [('is_thursday', '!=', True)]}" />
                    <field name="friday" attrs="{'readonly': [('is_friday', '!=', True)]}" />
                    <field name="saturday" attrs="{'readonly': [('is_saturday', '!=', True)]}" />
                    <field name="sunday" attrs="{'readonly': [('is_sunday', '!=', True)]}" />
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!--Activities Starting Time Constraints Action-->
    <record model="ir.actions.act_window" id="action_activities_starting_time">
        <field name="name">Activity Starting Time</field>
        <field name="res_model">op.activities.starting.time</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="activities_starting_time_tree_view" />
    </record>

    <!--Activity Time Slots Menu-->
    <menuitem id="menu_activities_starting_time" name="A set of activities has a set of preferred starting time"  parent="menu_activity_constraints"
    action="action_activities_starting_time" sequence="3" />


    <!--Activities Time Slots tree view-->
    <record id="activities_time_slots_tree_view" model="ir.ui.view">
      <field name="name">op.activities.timeslots.tree</field>
      <field name="model">op.activities.timeslots</field>
      <field name="arch" type="xml">
        <tree string="Activities Time Slots Tree">
          <field name="faculty_id"/>
          <field name="student_id"/>
          <field name="subject_id"/>
          <field name="activity_tag_id"/>
          <field name="duration"/>
          <field name="weight"/>
        </tree>
      </field>
    </record>

    <!--Activities Time Slots Form View-->
    <record id="activities_time_slots_form_view" model="ir.ui.view">
      <field name="name">op.activities.timeslots.form.view</field>
      <field name="model">op.activities.timeslots</field>
      <field name="arch" type="xml">
        <form string="Activities Time Slots Form">
          <sheet>
            <group>
              <group>
                <field name="faculty_id"/>
                <field name="student_id"/>
                <field name="duration"/>
              </group>
              <group>
                <field name="subject_id"/>
                <field name="activity_tag_id"/>
                <field name="weight"/>
              </group>
              <group>
              <button string="Set All Available" type="object" name="set_available"  class="oe_highlight" />
              <button string="Set All Not Available" type="object" name="set_not_available" class="oe_highlight"/>
              </group>
            </group>
            <notebook>
              <page string="Time Slots">
                <field name="activities_timeslots_line_ids">
                  <tree string="Activities activity_viewTime Slots" editable="bottom" create="false" delete="false">
                    <field name="name"/>
                    <field name="is_monday" invisible="1"/>
                    <field name="is_tuesday" invisible="1"/>
                    <field name="is_wednesday" invisible="1"/>
                    <field name="is_thursday" invisible="1"/>
                    <field name="is_friday" invisible="1"/>
                    <field name="is_saturday" invisible="1"/>
                    <field name="is_sunday" invisible="1"/>
                    <field name="monday" attrs="{'readonly': [('is_monday', '!=', True)]}" />
                    <field name="tuesday" attrs="{'readonly': [('is_tuesday', '!=', True)]}" />
                    <field name="wednesday" attrs="{'readonly': [('is_wednesday', '!=', True)]}" />
                    <field name="thursday" activity_viewattrs="{'readonly': [('is_thursday', '!=', True)]}" />
                    <field name="friday" attrs="{'readonly': [('is_friday', '!=', True)]}" />
                    <field name="saturday" attrs="{'readonly': [('is_saturday', '!=', True)]}" />
                    <field name="sunday" attrs="{'readonly': [('is_sunday', '!=', True)]}" />
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <!--Activities Time Slots Action-->
    <record model="ir.actions.act_window" id="action_activities_time_slots">
        <field name="name">Activities Time Slots</field>
        <field name="res_model">op.activities.timeslots</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="activities_time_slots_tree_view" />
    </record>


    <!--Activity Time Slots Menu-->
    <menuitem id="menu_activities_time_slots" name="A set of activities has a set of preferred time slots"  parent="menu_activity_constraints"
    action="action_activities_time_slots" sequence="4" />

  </data>
</odoo>
